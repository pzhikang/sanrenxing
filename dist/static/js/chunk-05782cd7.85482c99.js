(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05782cd7"],{"0d3b":function(e,t,i){var n=i("d039"),s=i("b622"),a=i("c430"),r=s("iterator");e.exports=!n((function(){var e=new URL("b?a=1&b=2&c=3","http://a"),t=e.searchParams,i="";return e.pathname="c%20d",t.forEach((function(e,n){t["delete"]("b"),i+=n+e})),a&&!e.toJSON||!t.sort||"http://a/c%20d?a=1&c=3"!==e.href||"3"!==t.get("c")||"a=1"!==String(new URLSearchParams("?a=1"))||!t[r]||"a"!==new URL("https://a@b").username||"b"!==new URLSearchParams(new URLSearchParams("a=b")).get("a")||"xn--e1aybc"!==new URL("http://тест").host||"#%D0%B1"!==new URL("http://a#б").hash||"a1c3"!==i||"x"!==new URL("http://x",void 0).host}))},2426:function(e,t,i){},"95de":function(e,t,i){"use strict";i("2426")},9861:function(e,t,i){"use strict";i("e260");var n=i("23e7"),s=i("d066"),a=i("0d3b"),r=i("6eeb"),o=i("e2cc"),l=i("d44e"),c=i("9ed3"),u=i("69f3"),h=i("19aa"),d=i("5135"),p=i("0366"),f=i("f5df"),g=i("825a"),v=i("861d"),w=i("7c73"),y=i("5c6c"),b=i("9a1f"),m=i("35a1"),k=i("b622"),x=s("fetch"),C=s("Headers"),_=k("iterator"),S="URLSearchParams",V=S+"Iterator",U=u.set,L=u.getterFor(S),M=u.getterFor(V),R=/\+/g,T=Array(4),H=function(e){return T[e-1]||(T[e-1]=RegExp("((?:%[\\da-f]{2}){"+e+"})","gi"))},D=function(e){try{return decodeURIComponent(e)}catch(t){return e}},j=function(e){var t=e.replace(R," "),i=4;try{return decodeURIComponent(t)}catch(n){while(i)t=t.replace(H(i--),D);return t}},F=/[!'()~]|%20/g,P={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+"},E=function(e){return P[e]},O=function(e){return encodeURIComponent(e).replace(F,E)},N=function(e,t){if(t){var i,n,s=t.split("&"),a=0;while(a<s.length)i=s[a++],i.length&&(n=i.split("="),e.push({key:j(n.shift()),value:j(n.join("="))}))}},I=function(e){this.entries.length=0,N(this.entries,e)},A=function(e,t){if(e<t)throw TypeError("Not enough arguments")},B=c((function(e,t){U(this,{type:V,iterator:b(L(e).entries),kind:t})}),"Iterator",(function(){var e=M(this),t=e.kind,i=e.iterator.next(),n=i.value;return i.done||(i.value="keys"===t?n.key:"values"===t?n.value:[n.key,n.value]),i})),$=function(){h(this,$,S);var e,t,i,n,s,a,r,o,l,c=arguments.length>0?arguments[0]:void 0,u=this,p=[];if(U(u,{type:S,entries:p,updateURL:function(){},updateSearchParams:I}),void 0!==c)if(v(c))if(e=m(c),"function"===typeof e){t=e.call(c),i=t.next;while(!(n=i.call(t)).done){if(s=b(g(n.value)),a=s.next,(r=a.call(s)).done||(o=a.call(s)).done||!a.call(s).done)throw TypeError("Expected sequence with length 2");p.push({key:r.value+"",value:o.value+""})}}else for(l in c)d(c,l)&&p.push({key:l,value:c[l]+""});else N(p,"string"===typeof c?"?"===c.charAt(0)?c.slice(1):c:c+"")},q=$.prototype;o(q,{append:function(e,t){A(arguments.length,2);var i=L(this);i.entries.push({key:e+"",value:t+""}),i.updateURL()},delete:function(e){A(arguments.length,1);var t=L(this),i=t.entries,n=e+"",s=0;while(s<i.length)i[s].key===n?i.splice(s,1):s++;t.updateURL()},get:function(e){A(arguments.length,1);for(var t=L(this).entries,i=e+"",n=0;n<t.length;n++)if(t[n].key===i)return t[n].value;return null},getAll:function(e){A(arguments.length,1);for(var t=L(this).entries,i=e+"",n=[],s=0;s<t.length;s++)t[s].key===i&&n.push(t[s].value);return n},has:function(e){A(arguments.length,1);var t=L(this).entries,i=e+"",n=0;while(n<t.length)if(t[n++].key===i)return!0;return!1},set:function(e,t){A(arguments.length,1);for(var i,n=L(this),s=n.entries,a=!1,r=e+"",o=t+"",l=0;l<s.length;l++)i=s[l],i.key===r&&(a?s.splice(l--,1):(a=!0,i.value=o));a||s.push({key:r,value:o}),n.updateURL()},sort:function(){var e,t,i,n=L(this),s=n.entries,a=s.slice();for(s.length=0,i=0;i<a.length;i++){for(e=a[i],t=0;t<i;t++)if(s[t].key>e.key){s.splice(t,0,e);break}t===i&&s.push(e)}n.updateURL()},forEach:function(e){var t,i=L(this).entries,n=p(e,arguments.length>1?arguments[1]:void 0,3),s=0;while(s<i.length)t=i[s++],n(t.value,t.key,this)},keys:function(){return new B(this,"keys")},values:function(){return new B(this,"values")},entries:function(){return new B(this,"entries")}},{enumerable:!0}),r(q,_,q.entries),r(q,"toString",(function(){var e,t=L(this).entries,i=[],n=0;while(n<t.length)e=t[n++],i.push(O(e.key)+"="+O(e.value));return i.join("&")}),{enumerable:!0}),l($,S),n({global:!0,forced:!a},{URLSearchParams:$}),a||"function"!=typeof x||"function"!=typeof C||n({global:!0,enumerable:!0,forced:!0},{fetch:function(e){var t,i,n,s=[e];return arguments.length>1&&(t=arguments[1],v(t)&&(i=t.body,f(i)===S&&(n=t.headers?new C(t.headers):new C,n.has("content-type")||n.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"),t=w(t,{body:y(0,String(i)),headers:y(0,n)}))),s.push(t)),x.apply(this,s)}}),e.exports={URLSearchParams:$,getState:L}},"9a1f":function(e,t,i){var n=i("825a"),s=i("35a1");e.exports=function(e){var t=s(e);if("function"!=typeof t)throw TypeError(String(e)+" is not iterable");return n(t.call(e))}},e5d2:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("button",{staticClass:"new-dialog-btn",on:{click:e.addNewDialog}},[e._v("新建对话")]),i("div",{staticClass:"sidebar-btn history",on:{click:e.openHistory,mouseenter:function(t){return e.showTooltip("history")},mouseleave:e.hideTooltip}},[i("svg",{staticClass:"icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 24 24"}},[i("path",{attrs:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"}})]),e.tooltipVisible&&"history"===e.tooltipType?i("div",{staticClass:"tooltip"},[e._v("历史记录")]):e._e()]),i("div",{staticClass:"sidebar-btn cang",on:{click:e.openCang,mouseenter:function(t){return e.showTooltip("cang")},mouseleave:e.hideTooltip}},[i("svg",{staticClass:"icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 24 24"}},[i("path",{attrs:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","data-swindex":"0",d:"m20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82M7 7h.01"}})]),e.tooltipVisible&&"cang"===e.tooltipType?i("div",{staticClass:"tooltip"},[e._v("收藏夹")]):e._e()]),i("div",{staticClass:"chat-container",class:{moved:e.isMoved,"small-margin-left":e.isMarginLeftSmall}},[i("div",{ref:"chatMessages",staticClass:"chat-messages"},e._l(e.messages,(function(t,n){return i("div",{key:n,class:["message",t.type]},[i("img",{staticClass:"avatar",attrs:{src:t.avatar,alt:t.type}}),i("div",{staticClass:"message-content"},[e._v(" "+e._s(t.text)+" "),"server"===t.type&&0===n?i("div",{staticClass:"current-course"},[e._v(" 当前课程："),i("span",[e._v(e._s(e.currentCourse))])]):e._e()]),t.file?i("span",{staticClass:"file-name"},[e._v(e._s(t.file))]):e._e()])})),0),i("div",{staticClass:"chat-input"},[i("div",{staticClass:"input-container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.newMessage,expression:"newMessage"}],staticClass:"input",attrs:{placeholder:"请输入内容..."},domProps:{value:e.newMessage},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendMessage(t)},input:function(t){t.target.composing||(e.newMessage=t.target.value)}}}),i("label",{staticClass:"send-file-btn",attrs:{for:"file-upload"}},[i("input",{staticStyle:{display:"none"},attrs:{id:"file-upload",type:"file"},on:{change:e.handleFileUpload}}),i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 256 256"}},[i("path",{attrs:{fill:"currentColor",d:"m212.48 136.49l-82.06 82a60 60 0 0 1-84.85-84.88l98.16-97.89a40 40 0 0 1 56.56 56.59l-.17.16l-95.8 92.22a12 12 0 1 1-16.64-17.3l95.71-92.12a16 16 0 0 0-22.7-22.56l-98.16 97.86a36 36 0 0 0 50.93 50.91l82.06-82a12 12 0 0 1 17 17Z"}})])]),i("button",{staticClass:"send-btn",on:{click:e.sendMessage}},[i("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 256 256"}},[i("path",{attrs:{fill:"currentColor",d:"M208 32H48a16 16 0 0 0-16 16v160a16 16 0 0 0 16 16h160a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16m0 176H48V48h160ZM90.34 125.66a8 8 0 0 1 0-11.32l32-32a8 8 0 0 1 11.32 0l32 32a8 8 0 0 1-11.32 11.32L136 107.31V168a8 8 0 0 1-16 0v-60.69l-18.34 18.35a8 8 0 0 1-11.32 0"}})])])])])]),e.isVisible?i("div",{staticClass:"notes-container"},[i("h1",[e._v("收藏夹")]),e._l(e.notes,(function(t,n){return i("div",{key:n,staticClass:"note"},[i("h3",[e._v(" "+e._s(t.title)+" "),i("span",{staticClass:"delete-icon",on:{click:function(t){return e.deleteNote(n)}}},[e._v("×")])]),i("hr",{staticStyle:{"margin-top":"-59px","margin-bottom":"-5px",color:"#cbcbcb"}}),i("p",[e._v(e._s(t.content))])])})),i("div",{staticClass:"add-note-container",on:{click:e.addNote}},[e._v("返回")])],2):e._e(),e.isHistoryVisible?i("div",{staticClass:"history-container"},[i("h1",[e._v("历史记录")]),e._l(e.histories,(function(t,n){return i("div",{key:n,staticClass:"note"},[i("h3",[e._v(" "+e._s(t.title)+" "),i("span",{staticClass:"delete-icon",on:{click:function(t){return e.deleteHistory(n)}}},[e._v("×")])]),i("hr",{staticStyle:{"margin-top":"-59px","margin-bottom":"-5px",color:"#cbcbcb"}}),i("p",[e._v(e._s(t.content))])])})),i("div",{staticClass:"add-note-container",on:{click:e.closeHistory}},[e._v("返回")])],2):e._e()])},s=[],a=i("c7eb"),r=i("1da1"),o=(i("99af"),i("a434"),i("b0c0"),i("d3b7"),i("25f0"),i("3ca3"),i("498a"),i("ddb0"),i("9861"),{name:"Chat",data:function(){return{notes:[{title:"简述高等数学这个科目",content:"通常认为，高等数学是由微积分学、较深入的代数学、几何学以及它们之间的交叉内容所形成的一门基础学科。主要内容包括：数列、极限、微积分、空间解析几何与线性代数等。"},{title:"简述C++这个科目",content:"生成程序是指将源码（C++语句）转换成一个可以运行的应用程序的过程。如果程序编写正确，"},{title:"再次简述C++这个科目",content:"dhusiajfhiadhfcuidk"}],histories:[{title:"历史记录1",content:"这是第一个历史记录的内容。"},{title:"历史记录2",content:"这是第二个历史记录的内容。"},{title:"历史记录3",content:"这是第三个历史记录的内容。"}],isVisible:!1,isHistoryVisible:!1,messages:[{text:"智慧助教服务器",type:"server",avatar:"https://via.placeholder.com/40"}],newMessage:"",uploadedFile:null,currentSearchQuery:"",tooltipVisible:!1,tooltipType:"",isMoved:!1,isMarginLeftSmall:!1,isDialogSettingVisible:!1,selectedDialogs:{new:[],recent:[]},dialogSettings:{new:[],recent:[]},currentCourse:""}},mounted:function(){this.currentCourse=this.$route.query.course||localStorage.getItem("selectedCourse")||"未选择课程"},methods:{addNewDialog:function(){},openHistory:function(){this.isHistoryVisible=!this.isHistoryVisible},closeHistory:function(){this.isHistoryVisible=!this.isHistoryVisible},deleteHistory:function(e){this.histories.splice(e,1)},openCang:function(){this.isVisible=!this.isVisible,this.isDialogSettingVisible=!this.isDialogSettingVisible},addNote:function(){this.isVisible=!this.isVisible},deleteNote:function(e){this.notes.splice(e,1)},sendQuestion1:function(e){return Object(r["a"])(Object(a["a"])().mark((function t(){var i,n,s;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,i=new FormData,i.append("question",e),i.append("model_name","deepseek"),t.next=6,fetch("http://api.xdrv.cn:52381/zhihuijiaoyu/get_teacher_text_files/",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded","User-Agent":"YourAppName/1.0 (YourDeviceInfo)"},body:new URLSearchParams(i).toString()});case 6:if(n=t.sent,n.ok){t.next=9;break}throw new Error("请求失败");case 9:return t.next=11,n.json();case 11:return s=t.sent,t.abrupt("return",s.answer||"默认值");case 15:return t.prev=15,t.t0=t["catch"](0),console.error("API 错误:",t.t0),t.abrupt("return",t.t0.message||"请求失败");case 19:case"end":return t.stop()}}),t,null,[[0,15]])})))()},sendMessage:function(){var e=this;return Object(r["a"])(Object(a["a"])().mark((function t(){var i,n;return Object(a["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(""!==e.newMessage.trim()||e.uploadedFile){t.next=2;break}return t.abrupt("return");case 2:return i={text:e.newMessage,type:"user",avatar:"https://via.placeholder.com/40"},e.uploadedFile&&(i.file=e.uploadedFile.name,e.uploadedFile=null),e.messages.push(i),e.newMessage="",t.prev=6,t.next=9,e.sendQuestion1(i.text);case 9:n=t.sent,e.messages.push({text:n,type:"server",avatar:"https://via.placeholder.com/40"}),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](6),e.messages.push({text:"获取回复失败: "+t.t0.message,type:"server",avatar:"https://via.placeholder.com/40"});case 16:e.$nextTick((function(){var t=e.$refs.chatMessages;t&&(t.scrollTop=t.scrollHeight)}));case 17:case"end":return t.stop()}}),t,null,[[6,13]])})))()},handleSettingClick:function(e,t){console.log("Setting clicked for ".concat(e," dialog at index ").concat(t)),this.$set(this.dialogSettings[e],t,!this.dialogSettings[e][t]),this.isDialogSettingVisible=!this.isDialogSettingVisible},toggleSelectDialog:function(e,t){var i=this.selectedDialogs[e].indexOf(t);i>-1?this.selectedDialogs[e].splice(i,1):this.selectedDialogs[e].push(t)},handleFileUpload:function(e){var t=e.target.files[0];t&&(this.uploadedFile=t)},showTooltip:function(e){this.tooltipVisible=!0,this.tooltipType=e},hideTooltip:function(){this.tooltipVisible=!1,this.tooltipType=""}}}),l=o,c=(i("95de"),i("2877")),u=Object(c["a"])(l,n,s,!1,null,"530653c4",null);t["default"]=u.exports}}]);