(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-575d6b7c"],{"7db0":function(e,t,o){"use strict";var n=o("23e7"),s=o("b727").find,i=o("44d2"),r=o("ae40"),l="find",c=!0,a=r(l);l in[]&&Array(1)[l]((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!a},{find:function(e){return s(this,e,arguments.length>1?arguments[1]:void 0)}}),i(l)},9359:function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.selectedCourse?o("div",[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.questions},on:{"selection-change":e.handleSelectionChange}},[o("el-table-column",{attrs:{prop:"content",label:"题目"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.editingIndex===t.$index?o("div",[o("el-input",{attrs:{placeholder:"请输入题目内容"},model:{value:t.row.question,callback:function(o){e.$set(t.row,"question",o)},expression:"scope.row.question"}}),o("el-input",{attrs:{placeholder:"请输入选项A"},model:{value:t.row.options[0],callback:function(o){e.$set(t.row.options,0,o)},expression:"scope.row.options[0]"}}),o("el-input",{attrs:{placeholder:"请输入选项B"},model:{value:t.row.options[1],callback:function(o){e.$set(t.row.options,1,o)},expression:"scope.row.options[1]"}}),o("el-input",{attrs:{placeholder:"请输入选项C"},model:{value:t.row.options[2],callback:function(o){e.$set(t.row.options,2,o)},expression:"scope.row.options[2]"}}),o("el-input",{attrs:{placeholder:"请输入选项D"},model:{value:t.row.options[3],callback:function(o){e.$set(t.row.options,3,o)},expression:"scope.row.options[3]"}}),o("el-input",{attrs:{placeholder:"请输入答案"},model:{value:t.row.answer,callback:function(o){e.$set(t.row,"answer",o)},expression:"scope.row.answer"}}),o("el-input",{attrs:{placeholder:"请输入解析"},model:{value:t.row.analysis,callback:function(o){e.$set(t.row,"analysis",o)},expression:"scope.row.analysis"}})],1):o("div",{staticStyle:{color:"black"}},[o("div",[e._v(e._s(t.row.question))]),o("div",[e._v("A. "+e._s(t.row.options[0]))]),o("div",[e._v("B. "+e._s(t.row.options[1]))]),o("div",[e._v("C. "+e._s(t.row.options[2]))]),o("div",[e._v("D. "+e._s(t.row.options[3]))]),o("div",[e._v("答案："+e._s(t.row.answer))]),o("div",[e._v("解析："+e._s(t.row.analysis||"暂无解析"))])])]}}])}),o("el-table-column",{attrs:{label:"操作",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("div",{staticStyle:{display:"flex","flex-direction":"column","align-items":"flex-end"}},[o("el-button",{staticStyle:{color:"black"},attrs:{type:"text",size:"small"},on:{click:function(o){return e.handleEdit(t.$index,t.row)}}},[o("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 24 24"}},[o("path",{attrs:{fill:"currentColor",d:"m7 17.013l4.413-.015l9.632-9.54c.378-.378.586-.88.586-1.414s-.208-1.036-.586-1.414l-1.586-1.586c-.756-.756-2.075-.752-2.825-.003L7 12.583zM18.045 4.458l1.589 1.583l-1.597 1.582l-1.586-1.585zM9 13.417l6.03-5.973l1.586 1.586l-6.029 5.971L9 15.006z"}}),o("path",{attrs:{fill:"currentColor",d:"M5 21h14c1.103 0 2-.897 2-2v-8.668l-2 2V19H8.158c-.026 0-.053.01-.079.01c-.033 0-.066-.009-.1-.01H5V5h6.847l2-2H5c-1.103 0-2 .897-2 2v14c0 1.103.897 2 2 2"}})]),e._v(" 编辑")]),o("el-button",{staticStyle:{color:"black"},attrs:{type:"text",size:"small"},on:{click:function(o){return e.handleDelete(t.$index,t.row)}}},[o("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 24 24"}},[o("path",{attrs:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","data-swindex":"0",d:"M4 7h16M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2l1-12M9 7V4a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v3m-5 5l4 4m0-4l-4 4"}})]),e._v(" 删除")]),e.editingIndex===t.$index?o("el-button",{staticStyle:{color:"black"},attrs:{type:"text",size:"small"},on:{click:function(o){return e.handleSave(t.$index,t.row)}}},[e._v(" 保存")]):e._e()],1)]}}])})],1)],1):o("div",[o("el-card",{staticClass:"course-selection"},e._l(e.courseNames,(function(t,n){return o("el-button",{key:n,staticClass:"course-button",on:{click:function(o){return e.selectCourse(t)}}},[e._v(" "+e._s(t)+"的习题 ")])})),1)],1)},s=[],i=o("3835"),r=(o("7db0"),o("caad"),o("a434"),o("e9c4"),o("b64b"),o("d3b7"),o("2532"),{data:function(){var e=JSON.parse(localStorage.getItem("allSubjects"))||[];return Array.isArray(e)?console.log("获取到的 subject 数据:",e):console.error("subject 数据格式不正确，期望是一个数组"),{courseNames:JSON.parse(localStorage.getItem("courseNames"))||[],selectedCourse:null,questions:[],selectedQuestions:[],editingIndex:-1}},methods:{selectCourse:function(e){this.selectedCourse=e;var t=JSON.parse(localStorage.getItem("allSubjects"))||[],o=t.find((function(t){var o=t.split("_"),n=Object(i["a"])(o,2),s=n[1];return s===e}));o?(console.log("筛选出的 subject:",o),this.sendSubjectToBackend(o)):console.error("未找到与 courseName 对应的 subject")},sendSubjectToBackend:function(e){var t=this,o="http://api.xdrv.cn:52381/djangoZhiHuiShu/get_questions/",n={subject:e,difficulty:0};console.log("发送到后端的数据:",n),fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){console.log("后端响应：",e),t.questions=Array.isArray(e)?e:[]})).catch((function(e){console.error("请求失败：",e)}))},handleEdit:function(e,t){this.editingIndex=e,console.log("编辑",e,t)},handleDelete:function(e,t){var o=this;console.log("删除",e,t);var n="http://api.xdrv.cn:52381/djangoZhiHuiShu/delete_question/".concat(t.id,"/");fetch(n,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(e){if(!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));return e.json()})).then((function(t){console.log("题目删除成功:",t),o.questions.splice(e,1),alert("题目删除成功")})).catch((function(t){console.error("题目删除失败:",t),o.questions.splice(e,1),t.message.includes("404")&&alert("题目不存在，请刷新页面后重试。")}))},handleSave:function(e,t){var o=this;this.editingIndex=-1,console.log("保存",e,t);var n={question:t.question,options:t.options,answer:t.answer,analysis:t.analysis},s="http://api.xdrv.cn:52381/djangoZhiHuiShu/update_question/".concat(t.id,"/");fetch(s,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((function(e){if(!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));return e.json()})).then((function(t){console.log("题目更新成功:",t),o.questions.splice(e,1,t.data)})).catch((function(e){console.error("题目更新失败:",e),e.message.includes("404")?alert("题目不存在，请刷新页面后重试。"):e.message.includes("400")&&alert("选项格式不正确，请检查选项内容。")}))},handleSelectionChange:function(e){this.selectedQuestions=e,console.log("选中的题目:",this.selectedQuestions),this.$axios.post("/api/selected-questions",{selectedQuestions:this.selectedQuestions}).then((function(e){console.log("选中的题目已成功提交到后端:",e.data)})).catch((function(e){console.error("提交选中的题目时出错:",e)}))}},created:function(){}}),l=r,c=(o("a2c0"),o("2877")),a=Object(c["a"])(l,n,s,!1,null,"2fe18bb1",null);t["default"]=a.exports},a2c0:function(e,t,o){"use strict";o("c7af")},c7af:function(e,t,o){},e9c4:function(e,t,o){var n=o("23e7"),s=o("d066"),i=o("d039"),r=s("JSON","stringify"),l=/[\uD800-\uDFFF]/g,c=/^[\uD800-\uDBFF]$/,a=/^[\uDC00-\uDFFF]$/,u=function(e,t,o){var n=o.charAt(t-1),s=o.charAt(t+1);return c.test(e)&&!a.test(s)||a.test(e)&&!c.test(n)?"\\u"+e.charCodeAt(0).toString(16):e},d=i((function(){return'"\\udf06\\ud834"'!==r("\udf06\ud834")||'"\\udead"'!==r("\udead")}));r&&n({target:"JSON",stat:!0,forced:d},{stringify:function(e,t,o){var n=r.apply(null,arguments);return"string"==typeof n?n.replace(l,u):n}})}}]);