(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59952a16"],{"08df":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"settings-popup",class:{moved:t.isMoved,"small-margin-left2":t.isMarginLeftSmall}},[a("div",{staticClass:"settings-popup-content"},[a("div",{staticClass:"name"},[t._v("设置")]),a("div",{staticClass:"bigbox"},[a("div",{staticClass:"grzl"},[a("svg",{staticClass:"grzlsvg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"21",viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"currentColor",d:"M3 1h12.414L21 6.586V23H3zm2 2v18h14V7.414L14.586 3zm7 6a1.5 1.5 0 1 0 0 3a1.5 1.5 0 0 0 0-3m-3.5 1.5a3.5 3.5 0 1 1 7 0a3.5 3.5 0 0 1-7 0M6 19a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v1h-2v-1a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v1H6z"}})]),a("p",[t._v("通用")]),a("svg",{staticClass:"grzxjt",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"currentColor",d:"M10 6L8.59 7.41L13.17 12l-4.58 4.59L10 18l6-6z"}})])]),a("div",{staticClass:"jb"},[a("svg",{staticClass:"jbsvg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"21",viewBox:"0 0 256 256"}},[a("path",{attrs:{fill:"currentColor",d:"m229.66 58.34l-32-32a8 8 0 0 0-11.32 0l-96 96A8 8 0 0 0 88 128v32a8 8 0 0 0 8 8h32a8 8 0 0 0 5.66-2.34l96-96a8 8 0 0 0 0-11.32M124.69 152H104v-20.69l64-64L188.69 88ZM200 76.69L179.31 56L192 43.31L212.69 64ZM224 128v80a16 16 0 0 1-16 16H48a16 16 0 0 1-16-16V48a16 16 0 0 1 16-16h80a8 8 0 0 1 0 16H48v160h160v-80a8 8 0 0 1 16 0"}})]),a("p",[t._v("举报与反馈")]),a("svg",{staticClass:"grzxjt",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"currentColor",d:"M10 6L8.59 7.41L13.17 12l-4.58 4.59L10 18l6-6z"}})])]),a("div",{staticClass:"grzxbox"},[a("div",{staticClass:"yhfw"},[a("svg",{staticClass:"yhfwsvg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"21",viewBox:"0 0 48 48"}},[a("g",{attrs:{fill:"none",stroke:"currentColor","stroke-linejoin":"round","stroke-width":"4","data-swindex":"0"}},[a("path",{attrs:{d:"M8 6a2 2 0 0 1 2-2h20l10 10v28a2 2 0 0 1-2 2H10a2 2 0 0 1-2-2z"}}),a("path",{attrs:{"stroke-linecap":"round",d:"M16 20h16m-16 8h16"}})])]),a("p",[t._v("用户服务")]),a("svg",{staticClass:"grzxjt",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"currentColor",d:"M10 6L8.59 7.41L13.17 12l-4.58 4.59L10 18l6-6z"}})])]),a("div",{staticClass:"ys"},[a("svg",{staticClass:"yssvg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"21",viewBox:"0 0 24 24"}},[a("g",{attrs:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"1.5","data-swindex":"0"}},[a("path",{attrs:{d:"M21.25 6.861v6.342a2.057 2.057 0 0 1-.606 1.459l-5.982 5.982a2.055 2.055 0 0 1-1.46.606h-6.34a4.111 4.111 0 0 1-4.112-4.111V6.86a4.111 4.111 0 0 1 4.111-4.11H17.14a4.111 4.111 0 0 1 4.111 4.111"}}),a("path",{attrs:{d:"m14.056 21.075l-.514-4.11a3.082 3.082 0 0 1 3.443-3.444l4.11.514"}})])]),a("p",[t._v("隐私协议")]),a("svg",{staticClass:"grzxjt",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"currentColor",d:"M10 6L8.59 7.41L13.17 12l-4.58 4.59L10 18l6-6z"}})])]),a("div",{staticClass:"xxqd"},[a("svg",{staticClass:"xxqdsvg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"21",height:"21",viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"currentColor","fill-rule":"evenodd",d:"M7.099 1.25H16.9c1.017 0 1.717 0 2.306.204a3.796 3.796 0 0 1 2.348 2.412l-.713.234l.713-.234c.196.597.195 1.307.195 2.36v14.148c0 1.466-1.727 2.338-2.864 1.297a.196.196 0 0 0-.271 0l-.484.442c-.928.85-2.334.85-3.262 0a.907.907 0 0 0-1.238 0c-.928.85-2.334.85-3.262 0a.907.907 0 0 0-1.238 0c-.928.85-2.334.85-3.262 0l-.483-.442a.196.196 0 0 0-.272 0c-1.137 1.04-2.864.169-2.864-1.297V6.227c0-1.054 0-1.764.195-2.361a3.795 3.795 0 0 1 2.348-2.412c.59-.205 1.289-.204 2.306-.204m.146 1.5c-1.221 0-1.642.01-1.96.121A2.296 2.296 0 0 0 3.87 4.334c-.111.338-.12.784-.12 2.036v14.004c0 .12.059.192.134.227a.2.2 0 0 0 .11.018a.194.194 0 0 0 .107-.055a1.695 1.695 0 0 1 2.296 0l.483.442a.907.907 0 0 0 1.238 0a2.407 2.407 0 0 1 3.262 0a.907.907 0 0 0 1.238 0a2.407 2.407 0 0 1 3.262 0a.907.907 0 0 0 1.238 0l.483-.442a1.695 1.695 0 0 1 2.296 0c.043.04.08.052.108.055a.2.2 0 0 0 .109-.018c.075-.035.135-.108.135-.227V6.37c0-1.252-.01-1.698-.12-2.037a2.296 2.296 0 0 0-1.416-1.462c-.317-.11-.738-.12-1.959-.12zM6.25 7.5A.75.75 0 0 1 7 6.75h.5a.75.75 0 0 1 0 1.5H7a.75.75 0 0 1-.75-.75m3.5 0a.75.75 0 0 1 .75-.75H17a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75M6.25 11a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5H7a.75.75 0 0 1-.75-.75m3.5 0a.75.75 0 0 1 .75-.75H17a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75m-3.5 3.5a.75.75 0 0 1 .75-.75h.5a.75.75 0 0 1 0 1.5H7a.75.75 0 0 1-.75-.75m3.5 0a.75.75 0 0 1 .75-.75H17a.75.75 0 0 1 0 1.5h-6.5a.75.75 0 0 1-.75-.75","clip-rule":"evenodd"}})]),a("p",[t._v("个人信息清单")]),a("svg",{staticClass:"grzxjt",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"currentColor",d:"M10 6L8.59 7.41L13.17 12l-4.58 4.59L10 18l6-6z"}})])])])]),a("div",{staticClass:"popup-content2",on:{click:t.logout}},[a("svg",{staticClass:"tcsvg",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 24 24"}},[a("g",{attrs:{fill:"currentColor","fill-rule":"evenodd","clip-rule":"evenodd"}},[a("path",{attrs:{d:"M15.99 7.823a.75.75 0 0 1 1.061.021l3.49 3.637a.75.75 0 0 1 0 1.038l-3.49 3.637a.75.75 0 0 1-1.082-1.039l2.271-2.367h-6.967a.75.75 0 0 1 0-1.5h6.968l-2.272-2.367a.75.75 0 0 1 .022-1.06"}}),a("path",{attrs:{d:"M3.25 4A.75.75 0 0 1 4 3.25h9.455a.75.75 0 0 1 .75.75v3a.75.75 0 1 1-1.5 0V4.75H4.75v14.5h7.954V17a.75.75 0 0 1 1.5 0v3a.75.75 0 0 1-.75.75H4a.75.75 0 0 1-.75-.75z"}})])]),t._v("退出登录 ")])])]),a("div",{staticClass:"grzltc",class:{moved:t.isMoved,"small-margin-left3":t.isMarginLeftSmall}},[a("div",{staticClass:"tjsvg"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"35",height:"35",viewBox:"0 0 20 20"}},[a("path",{attrs:{fill:"currentColor",d:"M11 9V5H9v4H5v2h4v4h2v-4h4V9zm-1 11a10 10 0 1 1 0-20a10 10 0 0 1 0 20"}})])]),a("div",{staticClass:"tuox"},[a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"130",height:"130",viewBox:"0 0 24 24"}},[a("path",{attrs:{fill:"currentColor",d:"M12 12q-1.65 0-2.825-1.175T8 8t1.175-2.825T12 4t2.825 1.175T16 8t-1.175 2.825T12 12m-8 6v-.8q0-.85.438-1.562T5.6 14.55q1.55-.775 3.15-1.162T12 13t3.25.388t3.15 1.162q.725.375 1.163 1.088T20 17.2v.8q0 .825-.587 1.413T18 20H6q-.825 0-1.412-.587T4 18m2 0h12v-.8q0-.275-.137-.5t-.363-.35q-1.35-.675-2.725-1.012T12 15t-2.775.338T6.5 16.35q-.225.125-.363.35T6 17.2zm6-8q.825 0 1.413-.587T14 8t-.587-1.412T12 6t-1.412.588T10 8t.588 1.413T12 10m0 8"}})])]),a("div",{staticClass:"profile-content"},[a("div",{staticClass:"profile-item"},[a("p",[t._v("编辑昵称")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.nickname,expression:"userInfo.nickname"}],attrs:{type:"text",placeholder:"请输入用户昵称"},domProps:{value:t.userInfo.nickname},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateUserInfo(e)},input:function(e){e.target.composing||t.$set(t.userInfo,"nickname",e.target.value)}}})]),a("div",{staticClass:"profile-item"},[a("p",[t._v("学校")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.school,expression:"userInfo.school"}],attrs:{type:"text",placeholder:"请输入学校名称"},domProps:{value:t.userInfo.school},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"school",e.target.value)}}})]),a("div",{staticClass:"profile-item"},[a("p",[t._v("学院")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.college,expression:"userInfo.college"}],attrs:{type:"text",placeholder:"请输入学院名称"},domProps:{value:t.userInfo.college},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"college",e.target.value)}}})]),a("div",{staticClass:"profile-item"},[a("p",[t._v("专业")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.major,expression:"userInfo.major"}],attrs:{type:"text",placeholder:"请输入专业名称"},domProps:{value:t.userInfo.major},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"major",e.target.value)}}})]),a("div",{staticClass:"profile-item"},[a("p",[t._v("入学年份")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.enrollment_year,expression:"userInfo.enrollment_year"}],attrs:{type:"text",placeholder:"请输入入学年份"},domProps:{value:t.userInfo.enrollment_year},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"enrollment_year",e.target.value)}}})]),a("div",{staticClass:"profile-item"},[a("p",[t._v("学号")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.student_id,expression:"userInfo.student_id"}],attrs:{type:"text",placeholder:"请输入学号"},domProps:{value:t.userInfo.student_id},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"student_id",e.target.value)}}})]),a("div",{staticClass:"profile-item"},[a("p",[t._v("真实姓名")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.userInfo.real_name,expression:"userInfo.real_name"}],attrs:{type:"text",placeholder:"请输入真实姓名"},domProps:{value:t.userInfo.real_name},on:{input:function(e){e.target.composing||t.$set(t.userInfo,"real_name",e.target.value)}}})])]),a("div",{staticClass:"bc",on:{click:t.updateUserInfo}},[t._v("保存")])])])},s=[],o=a("c7eb"),n=a("1da1"),l=(a("2ca0"),a("bc3a")),i=a.n(l),c={data:function(){return{userInfo:{nickname:"",school:"",college:"",major:"",enrollment_year:"",student_id:"",real_name:""},isMoved:!1,isMarginLeftSmall:!1}},created:function(){this.fetchUserInfo()},methods:{fetchUserInfo:function(){var t=this;return Object(n["a"])(Object(o["a"])().mark((function e(){var a,r;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=localStorage.getItem("token"),a){e.next=5;break}return console.error("未找到用户token"),e.abrupt("return");case 5:r=localStorage.getItem("username"),t.userInfo.nickname=r||"",e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.error("获取用户信息失败:",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},updateUserInfo:function(){var t=this;return Object(n["a"])(Object(o["a"])().mark((function e(){var a,r,s;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,a=localStorage.getItem("token"),a){e.next=7;break}return console.error("未找到用户token"),alert("请先登录"),t.$router.push("/login"),e.abrupt("return");case 7:return r=a.startsWith("Bearer ")?a:"Bearer ".concat(a),e.next=10,i.a.post("https://sanrenxing.wihealth.com.cn/Login/update_user_info/",{nickname:t.userInfo.nickname,school:t.userInfo.school,college:t.userInfo.college,major:t.userInfo.major,enrollment_year:t.userInfo.enrollment_year,student_id:t.userInfo.student_id,real_name:t.userInfo.real_name},{headers:{Authorization:r,"Content-Type":"application/json"}});case 10:s=e.sent,s.data&&(alert("个人信息更新成功"),t.userInfo.nickname&&localStorage.setItem("username",t.userInfo.nickname)),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](0),console.error("更新用户信息失败:",e.t0),e.t0.response?(console.error("响应数据:",e.t0.response.data),console.error("状态码:",e.t0.response.status),console.error("响应头:",e.t0.response.headers),403===e.t0.response.status?(alert("权限不足或会话已过期，请重新登录"),t.logout()):alert("更新失败: ".concat(e.t0.response.data.message||"请稍后再试"))):e.t0.request?(console.error("请求数据:",e.t0.request),alert("网络错误，请检查连接后重试")):(console.error("错误信息:",e.t0.message),alert("更新失败，请稍后再试"));case 18:case"end":return e.stop()}}),e,null,[[0,14]])})))()},logout:function(){var t=this;return Object(n["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.a.post("https://sanrenxing.wihealth.com.cn/Login/logout/",{},{headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});case 3:localStorage.removeItem("token"),localStorage.removeItem("username"),localStorage.removeItem("role"),localStorage.removeItem("student_id"),t.$router.push("/login"),e.next=15;break;case 10:e.prev=10,e.t0=e["catch"](0),console.error("退出登录失败:",e.t0),localStorage.clear(),t.$router.push("/login");case 15:case"end":return e.stop()}}),e,null,[[0,10]])})))()}}},u=c,v=(a("25c0"),a("2877")),d=Object(v["a"])(u,r,s,!1,null,"7e2e5696",null);e["default"]=d.exports},"25c0":function(t,e,a){"use strict";a("aedf")},aedf:function(t,e,a){}}]);