(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-633dafb4"],{"1bdb":function(e,t,s){},"571d":function(e,t,s){"use strict";s.r(t);var n,i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"zhong",class:{hidden:e.isHidden}},[s("div",{staticClass:"zhong-content"},[s("button",{staticClass:"new-dialog-btn",on:{click:e.addNewDialog}},[e._v("新建对话")]),s("svg",{staticClass:"shoushuo",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 24 24"}},[s("g",{attrs:{fill:"none",stroke:"currentColor"}},[s("circle",{attrs:{cx:"11",cy:"11",r:"5.5"}}),s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"m15 15l4 4"}})])]),s("br"),s("br"),s("br"),s("div",{staticClass:"duihuaxuanze"},[s("h3",[e._v("历史对话")]),s("div",{staticClass:"dialog-list-container"},[s("ul",e._l(e.todayDialogs,(function(t,n){return s("li",{key:n,staticClass:"dialog-text",class:{dianji:e.clickedDialogIndex.today===n},on:{click:function(t){return e.handleDialogClick("today",n)}}},[e._v(" "+e._s(t)+" "),s("div",{staticClass:"dots-menu",on:{click:function(t){return t.stopPropagation(),e.toggleMenu("today",n)}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24"}},[s("circle",{attrs:{cx:"12",cy:"6",r:"2",fill:"currentColor"}}),s("circle",{attrs:{cx:"12",cy:"12",r:"2",fill:"currentColor"}}),s("circle",{attrs:{cx:"12",cy:"18",r:"2",fill:"currentColor"}})]),e.activeMenu==="today-"+n?s("div",{staticClass:"menu-dropdown"},[s("button",{on:{click:function(t){return t.stopPropagation(),e.editDialog("today",n)}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24"}},[s("path",{attrs:{fill:"currentColor",d:"M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83l3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"}})]),e._v(" 编辑 ")]),s("button",{on:{click:function(t){return t.stopPropagation(),e.handleSettingClick("today",n)}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24"}},[s("path",{attrs:{fill:"currentColor",d:"M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5m7.43-2.53c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.23-.09-.5 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66z"}})]),e._v(" 设置 ")]),s("button",{staticClass:"delete-btn",on:{click:function(t){return t.stopPropagation(),e.deleteDialog("today",n)}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24"}},[s("path",{attrs:{fill:"currentColor",d:"M6 19a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V7H6v12M8 9h8v10H8V9m7.5-5l-1-1h-5l-1 1H5v2h14V4h-3.5z"}})]),e._v(" 删除 ")])]):e._e()])])})),0)])]),s("div",{staticClass:"sidebar-btn cang",class:{hidden:e.isHidden},on:{click:e.openCang}},[s("svg",{staticClass:"icon",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 24 24"}},[s("path",{attrs:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","data-swindex":"0",d:"m20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82M7 7h.01"}})]),s("span",[e._v("收藏夹")])])])]),s("div",{staticClass:"toggle-btn",class:{hidden:e.isHidden,mirrored:e.isHidden,move:e.isMove},on:{click:e.toggleZhong}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",viewBox:"0 0 24 24"}},[s("path",{attrs:{fill:"currentColor",d:"m8.369 12l4.747-8.968l1.768.936L10.632 12l4.252 8.032l-1.768.936z"}})])]),s("transition",{attrs:{name:"fade"}},[e.isHiddenup?e._e():s("div",{staticClass:"kcxz",class:{"small-margin-left":e.isSmallMarginzuo,hiddenup:e.isHiddenup}},[s("div",{staticClass:"category-selector"},[s("button",{class:{active:"all"===e.selectedCategory},on:{click:function(t){return e.handleCategoryClick("all")}}},[e._v("全部课程")]),s("button",{class:{active:"science"===e.selectedCategory},on:{click:function(t){return e.handleCategoryClick("science")}}},[e._v("理学")]),s("button",{class:{active:"engineering"===e.selectedCategory},on:{click:function(t){return e.handleCategoryClick("engineering")}}},[e._v("工学")]),s("button",{class:{active:"literature"===e.selectedCategory},on:{click:function(t){return e.handleCategoryClick("literature")}}},[e._v("文学")]),s("button",{class:{active:"law"===e.selectedCategory},on:{click:function(t){return e.handleCategoryClick("law")}}},[e._v("法学")]),s("button",{class:{active:"philosophy"===e.selectedCategory},on:{click:function(t){return e.handleCategoryClick("philosophy")}}},[e._v("哲学")]),s("button",{class:{active:"agriculture"===e.selectedCategory},on:{click:function(t){return e.handleCategoryClick("agriculture")}}},[e._v("农学")]),s("button",{class:{active:"medicine"===e.selectedCategory},on:{click:function(t){return e.handleCategoryClick("medicine")}}},[e._v("医学")]),s("button",{class:{active:"management"===e.selectedCategory},on:{click:function(t){return e.handleCategoryClick("management")}}},[e._v("管理学")]),s("button",{class:{active:"history"===e.selectedCategory},on:{click:function(t){return e.handleCategoryClick("history")}}},[e._v("历史学")]),s("button",{class:{active:"economics"===e.selectedCategory},on:{click:function(t){return e.handleCategoryClick("economics")}}},[e._v("经济学")]),s("button",{class:{active:"education"===e.selectedCategory},on:{click:function(t){return e.handleCategoryClick("education")}}},[e._v("教育学")]),s("button",{class:{active:"arts"===e.selectedCategory},on:{click:function(t){return e.handleCategoryClick("arts")}}},[e._v("艺术学")])]),s("div",{staticClass:"university-selector"},[s("button",{class:{active:"all"===e.selectedUniversity},on:{click:function(t){return e.handleUniversityClick("all")}}},[e._v("全部学校")]),s("button",{class:{active:"cust"===e.selectedUniversity},on:{click:function(t){return e.handleUniversityClick("cust")}}},[e._v("长春理工大学")]),s("button",{class:{active:"jlu"===e.selectedUniversity},on:{click:function(t){return e.handleUniversityClick("jlu")}}},[e._v("吉林大学")]),s("button",{class:{active:"ccit"===e.selectedUniversity},on:{click:function(t){return e.handleUniversityClick("ccit")}}},[e._v("长春工业大学")]),s("button",{class:{active:"nenu"===e.selectedUniversity},on:{click:function(t){return e.handleUniversityClick("nenu")}}},[e._v("东北师范大学")]),s("button",{class:{active:"ccu"===e.selectedUniversity},on:{click:function(t){return e.handleUniversityClick("ccu")}}},[e._v("长春大学")]),s("button",{class:{active:"hu"===e.selectedUniversity},on:{click:function(t){return e.handleUniversityClick("hu")}}},[e._v("汉口学院")])]),s("hr",{attrs:{width:"100%",size:"2px",color:"#d9d9d9"}}),s("div",{staticClass:"red-box-container",class:{"four-per-row":!e.isSmallMarginzuo,"three-per-row":e.isSmallMarginzuo}},[e._l(e.filteredSubjects,(function(t,n){return s("div",{key:n,staticClass:"red-box",on:{click:function(s){return e.handleBoxClick(t)}}},[s("div",{staticClass:"box-content"},[s("div",{staticClass:"image-side"},[s("img",{staticClass:"subject-image",attrs:{src:e.getImageUrl(t),alt:"Subject Image"}})]),s("div",{staticClass:"text-side"},[s("div",{staticClass:"subject-name"},[e._v(e._s(t))]),s("div",{staticClass:"teacher-name"},[e._v(e._s(e.filteredTeachers[n]))])])])])})),e.hasFilteredSubjects?e._e():s("div",{staticClass:"no-courses-message"},[e._v(" 请添加课程 ")])],2),s("div",{staticClass:"search-container"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],staticClass:"search-box",attrs:{type:"text",placeholder:"请输入内容...."},domProps:{value:e.searchQuery},on:{input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}}),s("div",{staticClass:"search-button",on:{click:e.performSearch}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"25",height:"25",viewBox:"0 0 24 24"}},[s("g",{attrs:{fill:"none",stroke:"currentColor"}},[s("circle",{attrs:{cx:"11",cy:"11",r:"5.5"}}),s("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round",d:"m15 15l4 4"}})])])])])])]),s("div",{staticClass:"chat-container",class:{moved:e.isMoved,"small-margin-left":e.isMarginLeftSmall}},[s("div",{staticClass:"course-dropdown"},[s("div",{staticClass:"course-label-and-menu"},[s("p",{staticClass:"kecheng",on:{click:e.toggleVisibility}},[e._v("当前课程："+e._s(e.selectedCourse||"未选择课程")+" "),s("svg",{staticClass:"rotate-180",class:{rotated:e.isRotated},attrs:{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 24 24"},on:{click:e.toggleRotate}},[s("path",{attrs:{fill:"currentColor",d:"M7.41 8.58L12 13.17l4.59-4.59L18 10l-6 6l-6-6z"}})])])])]),s("div",{ref:"chatMessages",staticClass:"chat-messages"},e._l(e.messages,(function(t,n){return s("div",{key:n,class:["message",t.type]},["server"===t.type?s("div",{staticClass:"message-actions"},[s("button",{on:{click:function(s){return e.copyMessage(t.text)}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 696 692"}},[s("path",{attrs:{fill:"currentColor",d:"m572 22l105 109c10 11 19 34 19 49v323c0 15-12 29-28 29H481v-49h157c5 0 9-4 9-9V202c0-5-4-9-9-9H522c-5 0-10-4-10-9V60c0-5-4-9-9-9H313c-5 0-10 4-10 9v69c-10-4-23-6-33-6h-15V30c0-16 13-28 28-28h242c15 0 37 9 47 20m-2 122h42c5 0 6-3 3-7l-48-49c-3-4-6-3-6 2v45c0 5 4 9 9 9m-252 38l104 110c11 11 19 33 19 48v323c0 16-12 29-27 29H29c-16 0-29-13-29-29V190c0-15 13-29 29-29h241c15 0 37 10 48 21M58 643h325c5 0 10-4 10-9V362c0-5-5-9-10-9H267c-5 0-9-4-9-9V220c0-5-4-9-9-9H58c-5 0-9 4-9 9v414c0 5 4 9 9 9m302-345l-47-51c-4-4-7-1-7 4v44c0 5 5 9 10 9h41c5 0 7-3 3-6"}})])]),s("button",{class:{redsvg:e.selectedButtons.includes("favorite")},on:{click:function(s){return e.favoriteMessage(t)}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"}},[s("path",{attrs:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","data-swindex":"0",d:"m12 2l3.09 6.26L22 9.27l-5 4.87l1.18 6.88L12 17.77l-6.18 3.25L7 14.14L2 9.27l6.91-1.01z"}})])]),s("button",{class:{redsvg:e.selectedButtons.includes("like")},on:{click:function(s){return e.likeMessage(t)}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"}},[s("path",{attrs:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","data-swindex":"0",d:"M7 10v12m8-16.12L14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88"}})])]),s("button",{class:{redsvg:e.selectedButtons.includes("dislike")},on:{click:function(s){return e.dislikeMessage(t)}}},[s("svg",{staticClass:"diaoc",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"}},[s("path",{attrs:{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2","data-swindex":"0",d:"M7 10v12m8-16.12L14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88"}})])]),s("button",{class:{redsvg:e.selectedButtons.includes("shuaxin")},on:{click:function(s){return e.shuaxin(t)}}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"}},[s("path",{attrs:{fill:"currentColor",d:"m17.83 4.194l.42-1.377a1 1 0 1 1 1.913.585l-1.17 3.825a1 1 0 0 1-1.248.664l-3.825-1.17a1 1 0 1 1 .585-1.912l1.672.511A7.381 7.381 0 0 0 3.185 6.584l-.26.633a1 1 0 1 1-1.85-.758l.26-.633A9.381 9.381 0 0 1 17.83 4.194M2.308 14.807l-.327 1.311a1 1 0 1 1-1.94-.484l.967-3.88a1 1 0 0 1 1.265-.716l3.828.954a1 1 0 0 1-.484 1.941l-1.786-.445a7.384 7.384 0 0 0 13.216-1.792a1 1 0 1 1 1.906.608a9.381 9.381 0 0 1-5.38 5.831a9.386 9.386 0 0 1-11.265-3.328"}})])])]):e._e(),s("img",{staticClass:"avatar",attrs:{src:t.avatar,alt:t.type}}),e._v(" "),s("div",{staticClass:"message-content"},[e._v(" "+e._s(t.text)+" ")]),t.file?s("span",{staticClass:"file-name"},[e._v(e._s(t.file))]):e._e()])})),0),s("div",{staticClass:"chat-input"},[s("div",{staticClass:"input-container"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.txt_question,expression:"txt_question"}],staticClass:"input",attrs:{placeholder:"我是你的课程助教，尽管提问吧"},domProps:{value:e.txt_question},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.ask_question(t)},input:[function(t){t.target.composing||(e.txt_question=t.target.value)},e.adjustInputHeight]}}),s("label",{staticClass:"send-file-btn",attrs:{for:"file-upload"}},[s("input",{staticStyle:{display:"none"},attrs:{id:"file-upload",type:"file"},on:{change:e.handleFileUpload}}),s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 256 256"}},[s("path",{attrs:{fill:"currentColor",d:"m212.48 136.49l-82.06 82a60 60 0 0 1-84.85-84.88l98.16-97.89a40 40 0 0 1 56.56 56.59l-.17.16l-95.8 92.22a12 12 0 1 1-16.64-17.3l95.71-92.12a16 16 0 0 0-22.7-22.56l-98.16 97.86a36 36 0 0 0 50.93 50.91l82.06-82a12 12 0 0 1 17 17Z"}})])]),s("button",{staticClass:"send-btn",on:{click:e.ask_question}},[s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"30",height:"30",viewBox:"0 0 256 256"}},[s("path",{attrs:{fill:"currentColor",d:"M208 32H48a16 16 0 0 0-16 16v160a16 16 0 0 0 16 16h160a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16m0 176H48V48h160ZM90.34 125.66a8 8 0 0 1 0-11.32l32-32a8 8 0 0 1 11.32 0l32 32a8 8 0 0 1-11.32 11.32L136 107.31V168a8 8 0 0 1-16 0v-60.69l-18.34 18.35a8 8 0 0 1-11.32 0"}})])])])])]),e.isVisible?s("div",{staticClass:"notes-container"},[e._l(e.notes,(function(t,n){return s("div",{key:n,staticClass:"note"},[s("h3",[e._v(" "+e._s(t.title)+" "),s("span",{staticClass:"delete-icon",on:{click:function(t){return e.deleteNote(n)}}},[e._v("×")])]),s("hr",{staticStyle:{"margin-top":"-59px","margin-bottom":"-5px",color:"#cbcbcb"}}),s("p",[e._v(e._s(t.content))])])})),s("div",{staticClass:"add-note-container",on:{click:e.addNote}},[e._v("返回")])],2):e._e()],1)},o=[],a=s("2909"),r=s("3835"),c=s("b85c"),l=s("c7eb"),u=s("1da1"),d=s("ade3"),h=(s("99af"),s("4de4"),s("7db0"),s("caad"),s("d81d"),s("a434"),s("b0c0"),s("e9c4"),s("d3b7"),s("6062"),s("2532"),s("3ca3"),s("498a"),s("159b"),s("ddb0"),{name:"Chat",data:function(){var e;return e={isRotated:!1,activeMenu:null,qaPairs:[],dialogQaMap:{},currentDialogId:null,notes:[{title:"简述高等数学这个科目",content:"通常认为，高等数学是由微积分学、较深入的代数学、几何学以及它们之间的交叉内容所形成的一门基础学科。主要内容包括：数列、极限、微积分、空间解析几何与线性代数等。"},{title:"简述C++这个科目",content:"生成程序是指将源码（C++语句）转换成一个可以运行的应用程序的过程。如果程序编写正确，那么通常只需按一个功能键，即可完成该过程。第一步对程序进行编译，这需要用到编译器（compiler）。编译器将C++语句转换成机器码（也称为目标码）；如果该步骤成功执行..."},{title:"再次简述C++这个科目",content:"dhusiajfhiadhfcuidk"}],messages:[{text:"你好",type:"server",avatar:s("b640")}],courses:[],courseNames:[],selectedCourse:"",courseName:"",txt_question:"",isVisible:!1,selectedButtons:[],newMessage:"",isHidden:!1,isMoved:!1,isMove:!1,isMarginLeftSmall:!1,isSmallMarginzuo:!1,isHiddenup:!0,searchQuery:"",currentSearchQuery:"",subjects:[""],teachers:[""]},Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(e,"selectedCourse",""),"isDropdownOpen",!1),"selectedCategory","all"),"categories",{all:[""],science:[""],engineering:[""],literature:[""],law:[],philosophy:[],agriculture:[],medicine:[],management:[],history:[],economics:[],education:[],arts:[]}),"selectedUniversity","all"),"universities",{all:[""],cust:[""],jlu:[],ccit:[],nenu:[],ccu:[]}),"setting1",""),"setting2",""),"setting3",""),"setting4",""),Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(e,"setting5",""),"modelCategories",[]),"selectedDialogIndex",{today:null,weekly:null,monthly:null,earlier:null}),"dialogActionsVisible",{today:null,weekly:null,monthly:null,earlier:null}),"todayDialogs",["新建对话1","新建对话2"]),"weeklyDialogs",["新建对话3","新建对话4"]),"monthlyDialogs",["新建对话5","新建对话6"]),"earlierDialogs",["新建对话7","新建对话8"]),"isDialogSettingVisible",!1),"dialogSettings",{today:{},weekly:{},monthly:{},earlier:{}}),Object(d["a"])(Object(d["a"])(Object(d["a"])(e,"selectedDialogs",{today:[],weekly:[],monthly:[],earlier:[]}),"uploadedFile",null),"clickedDialogIndex",{today:null,weekly:null,monthly:null,earlier:null})},mounted:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log("组件已挂载，开始初始化"),t.prev=1,console.log("准备获取课程"),t.next=5,e.fetchCourses();case 5:return console.log("课程获取完成"),t.next=8,e.getStudentId();case 8:return console.log("学生ID获取完成"),t.next=11,e.fetchChatRecords();case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](1),console.error("初始化失败:",t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})))()},methods:(n={toggleRotate:function(){this.isRotated=!this.isRotated},toggleMenu:function(e,t){var s="".concat(e,"-").concat(t);this.activeMenu=this.activeMenu===s?null:s},fetchChatRecords:function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var s,n,i;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return s=localStorage.getItem("student_id"),t.prev=1,t.next=4,fetch("http://api.xdrv.cn:52382/question_and_a/?student_id=".concat(s));case 4:if(n=t.sent,n.ok){t.next=7;break}throw new Error("Network response was not ok: ".concat(n.statusText));case 7:return t.next=9,n.json();case 9:i=t.sent,console.log("Fetched chat records:",i),i.data&&Array.isArray(i.data)?(e.qaPairs=i.data,e.todayDialogs=e.qaPairs.map((function(e){var t=e.question.length>20?e.question.substring(0,20)+"...":e.question;return t}))):console.error("Unexpected data format:",i),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](1),console.error("Failed to fetch chat records:",t.t0);case 17:case"end":return t.stop()}}),t,null,[[1,14]])})))()},copyMessage:function(e){navigator.clipboard.writeText(e).then((function(){alert("消息已复制到剪贴板")})).catch((function(e){console.error("无法复制文本: ",e)})),this.toggleButton("copy")},favoriteMessage:function(e){console.log("收藏消息:",e),this.toggleButton("favorite")},likeMessage:function(e){console.log("点赞消息:",e),this.toggleButton("like")},dislikeMessage:function(e){console.log("点踩消息:",e),this.toggleButton("dislike")},shuaxin:function(e){console.log("刷新消息:",e),this.toggleButton("shuaxin")},toggleButton:function(e){"like"!==e&&"dislike"!==e||(this.selectedButtons=this.selectedButtons.filter((function(e){return"like"!==e&&"dislike"!==e}))),this.selectedButtons.includes(e)?this.selectedButtons=this.selectedButtons.filter((function(t){return t!==e})):this.selectedButtons.push(e)},adjustInputHeight:function(){var e=document.querySelector(".input");e.style.height="auto",e.style.height=e.scrollHeight+"px"},openCang:function(){this.isVisible=!this.isVisible,this.isDialogSettingVisible=!this.isDialogSettingVisible},addNote:function(){this.isVisible=!this.isVisible},deleteNote:function(e){this.notes.splice(e,1)},toggleZhong:function(){this.isHidden=!this.isHidden,this.isMarginLeftSmall=!this.isMarginLeftSmall,this.isSmallMarginzuo=!this.isSmallMarginzuo,this.articleModalSize=this.isHidden?"large":"small"},toggleVisibility:function(){var e=this;this.isHiddenup?(this.isHiddenup=!1,this.$nextTick((function(){e.isDropdownOpen=!0}))):(this.isDropdownOpen=!1,setTimeout((function(){e.isHiddenup=!0}),100))},getImageUrl:function(e){return"/images/".concat(e,".png")},saveSelectedCourse:function(e){this.selectedCourse=e,localStorage.setItem("selectedCourse",e),this.courseName=e},handleBoxClick:function(e){this.saveSelectedCourse(e),this.isHiddenup=!0},performSearch:function(){this.currentSearchQuery=this.searchQuery},confirmGenerate:function(){""!==this.setting1.trim()&&""!==this.setting2.trim()&&(this.subjects.push(this.setting1),this.teachers.push(this.setting2),this.currentSearchQuery=this.setting1,this.setting1="",this.setting2="",this.closeSettingsModal())},handleCategoryClick:function(e){this.selectedCategory=e},editDialog:function(e,t){this.activeMenu=null,console.log("Edit dialog for ".concat(e," at index ").concat(t))},handleSettingClick:function(e,t){this.activeMenu=null,console.log("Setting clicked for ".concat(e," dialog at index ").concat(t))},deleteDialog:function(e,t){this.activeMenu=null,console.log("Delete dialog for ".concat(e," at index ").concat(t))},handleClickOutside:function(e){e.target.closest(".dots-menu")||(this.activeMenu=null)},handleUniversityClick:function(e){this.selectedUniversity=e},handleDialogClick:function(e,t){var s=this;this.activeMenu=null,this.resetAllSelections(),this.selectedDialogIndex[e]=t,this.clickedDialogIndex[e]=t,"today"===e?this.loadTodayDialog(t):this.loadOtherDialogs(e,t),this.$nextTick((function(){s.scrollToSelectedDialog(),s.scrollToBottom()}))},resetAllSelections:function(){this.selectedDialogIndex={today:null,weekly:null,monthly:null,earlier:null},this.dialogSettings={today:{},weekly:{},monthly:{},earlier:{}},this.clickedDialogIndex={today:null,weekly:null,monthly:null,earlier:null}},loadTodayDialog:function(e){if(e<this.qaPairs.length&&this.qaPairs[e]){var t=this.qaPairs[e];this.messages=[{text:t.question,type:"user",avatar:s("b640"),time:(new Date).toLocaleString()},{text:t.model_answer,type:"server",avatar:s("b640"),time:(new Date).toLocaleString()}],this.updateSelectedCourse(t.subject)}else this.messages=[{text:"这是一个新建的对话",type:"server",avatar:s("b640"),time:(new Date).toLocaleString()}]},loadOtherDialogs:function(e,t){this.messages=[{text:"这是".concat(this.getCategoryName(e),"的第 ").concat(t+1," 个对话"),type:"server",avatar:s("b640"),time:(new Date).toLocaleString()}]},getCategoryName:function(e){var t={weekly:"周分类",monthly:"月分类",earlier:"更早分类"};return t[e]||""},updateSelectedCourse:function(e){this.selectedCourse=e||"未指定课程",localStorage.setItem("selectedCourse",this.selectedCourse)},scrollToSelectedDialog:function(){var e=document.querySelector(".dialog-list-container"),t=null===e||void 0===e?void 0:e.querySelector(".dianji");t&&t.scrollIntoView({behavior:"smooth",block:"nearest"})},scrollToBottom:function(){var e=this.$refs.chatMessages;e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})}},Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(Object(d["a"])(n,"handleSettingClick",(function(e,t){console.log("Setting clicked for ".concat(e," dialog at index ").concat(t)),this.dialogSettings[e][t]=!this.dialogSettings[e][t],this.isDialogSettingVisible=!this.isDialogSettingVisible})),"deleteDialog",(function(e,t){console.log("Delete dialog for ".concat(e," at index ").concat(t)),"today"===e?this.todayDialogs.splice(t,1):"weekly"===e?this.weeklyDialogs.splice(t,1):"monthly"===e?this.monthlyDialogs.splice(t,1):"earlier"===e&&this.earlierDialogs.splice(t,1),this.dialogSettings[e][t]=!1})),"addNewDialog",(function(){this.todayDialogs.unshift("新建对话"),this.isDialogSettingVisible=!0})),"editDialog",(function(e,t){console.log("Edit dialog for ".concat(e," at index ").concat(t))})),"toggleDialogActions",(function(e,t){this.dialogActionsVisible[e]===t?this.dialogActionsVisible[e]=null:this.dialogActionsVisible[e]=t})),"scrollToBottom",(function(){var e=this.$refs.chatMessages;e&&e.scrollTo({top:e.scrollHeight,behavior:"smooth"})})),"ask_question",(function(){var e,t=this;if(console.log("Selected Course:",this.selectedCourse),console.log("Question Text:",this.txt_question),console.log("Uploaded File:",this.uploadedFile),""!==this.txt_question.trim())if(this.selectedCourse){var n=null===(e=this.courses.find((function(e){return e.name===t.selectedCourse})))||void 0===e?void 0:e.subject;if(n){console.log("Selected Course Combined:",n);var i=new Date;this.messages.push({time:i.toLocaleString(),text:this.txt_question,type:"user",avatar:s("b640")},{time:i.toLocaleString(),text:"等待答案...",type:"server",avatar:s("b640")}),this.$nextTick((function(){t.scrollToBottom()}));var o=this.txt_question,a=new FormData;a.append("question",o),a.append("course_id",n),a.append("model_name","deepseek"),console.log("FormData Contents:");var l,u=Object(c["a"])(a.entries());try{for(u.s();!(l=u.n()).done;){var d=Object(r["a"])(l.value,2),h=d[0],g=d[1];console.log(h,g)}}catch(v){u.e(v)}finally{u.f()}fetch("http://api.xdrv.cn:52381/zhihuijiaoyu/text_files/",{method:"POST",body:a}).then((function(e){if(console.log("原始响应:",e),!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));return e.json()})).then((function(e){if(console.log("解析后的数据:",e),!e.answer)throw new Error("响应数据中缺少 answer 属性");t.messages[t.messages.length-1].text=e.answer;var s=new FormData;s.append("student_id",t.student_id),s.append("question",o),s.append("model_answer",e.answer),s.append("subject",t.selectedCourse);var i=new FormData;i.append("answer",e.answer),i.append("course_name",t.selectedCourse),i.append("subject",n),console.log("Second Request FormData:");var a,l=Object(c["a"])(i.entries());try{for(l.s();!(a=l.n()).done;){var u=Object(r["a"])(a.value,2),d=u[0],h=u[1];console.log(d,h)}}catch(v){l.e(v)}finally{l.f()}try{fetch("http://api.xdrv.cn:52381/zhihuijiaoyu/get_qa_file/",{method:"POST",body:i}).then((function(e){if(!e.ok)throw new Error("服务器响应错误: 状态码 ".concat(e.status));return e.json()})).then((function(e){console.log("Fetched data:",e);var s=new FormData;s.append("liu",e["daan"]),s.append("course_name",t.selectedCourse),s.append("subject",n),s.append("student_id",t.student_id),console.log("Third Request FormData:");var i,o=Object(c["a"])(s.entries());try{for(o.s();!(i=o.n()).done;){var a=Object(r["a"])(i.value,2),l=a[0],u=a[1];console.log(l,u)}}catch(v){o.e(v)}finally{o.f()}console.log("第三次请求发送的数据:",{formData2:s}),fetch("http://api.xdrv.cn:52382/show_multiple_c/",{method:"POST",body:s}).then((function(e){if(!e.ok)throw new Error("Network response was not ok: ".concat(e.statusText));return e.json()}))}))}catch(g){console.error("Error in handleData:",g)}return console.log("第二个请求发送的数据:",s),fetch("http://api.xdrv.cn:52382/question_and_a/",{method:"POST",body:s})})).then((function(e){if(e){if(console.log("第二个请求的原始响应:",e),!e.ok)throw new Error("HTTP error! Status: ".concat(e.status));return e.json()}})).then((function(e){e&&console.log("第二个请求解析后的数据:",e)})).catch((function(e){console.error("Error during requests:",e),t.messages[t.messages.length-1].text="获取答案失败，请重试。"})).finally((function(){console.log("请求完成")})),this.txt_question=""}else alert("未找到对应的课程信息，请重新选择课程")}else alert("请选择课程");else alert("输入不能为空")})),"getStudentId",(function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var s;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,s=localStorage.getItem("student_id"),s){t.next=5;break}return console.error("未找到 student_id，请先登录或完成相关操作"),t.abrupt("return");case 5:e.student_id=s,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.error("发生错误：",t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()})),"fetchCourses",(function(){var e=this;return Object(u["a"])(Object(l["a"])().mark((function t(){var s,n,i,o,r,c,u,d;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.courseNames.length>0&&(s=localStorage.getItem("selectedCourse"),e.selectedCourse=s||e.courseNames[0],e.courseName=e.selectedCourse),console.log("获取课程方法被触发"),n=localStorage.getItem("token"),n){t.next=7;break}return console.error("未找到有效的token"),alert("请先登录"),t.abrupt("return");case 7:if(!e.loading){t.next=9;break}return t.abrupt("return");case 9:return e.loading=!0,t.prev=10,i="http://182.92.182.44:8001/Course_selection/student/courses/list/",t.next=14,fetch(i,{method:"GET",headers:{Authorization:"Bearer ".concat(n)}});case 14:return o=t.sent,t.next=17,o.json();case 17:r=t.sent,console.log("后端返回的完整数据:",r),r&&Array.isArray(r)?(c={all:[],science:[],engineering:[],literature:[],law:[],philosophy:[],agriculture:[],medicine:[],management:[],history:[],economics:[],education:[],arts:[]},u={all:[],cust:[],jlu:[],ccit:[],nenu:[],ccu:[]},e.courses=r.map((function(e){var t={id:e.course_id,name:e.course_name,subject:e.course_id_name,teacher:e.teacher_name,school:e.school_name,college:e.college_name,category:e.course_category};switch(c.all.push(t),e.course_category){case"理学":c.science.push(t);break;case"工学":c.engineering.push(t);break;case"文学":c.literature.push(t);break;case"法学":c.law.push(t);break;case"哲学":c.philosophy.push(t);break;case"农学":c.agriculture.push(t);break;case"医学":c.medicine.push(t);break;case"管理学":c.management.push(t);break;case"历史学":c.history.push(t);break;case"经济学":c.economics.push(t);break;case"教育学":c.education.push(t);break;case"艺术学":c.arts.push(t);break}return u.all.push(t),"长春理工大学"===e.school_name?u.cust.push(t):"吉林大学"===e.school_name?u.jlu.push(t):"长春工业大学"===e.school_name?u.ccit.push(t):"东北师范大学"===e.school_name?u.nenu.push(t):"长春大学"===e.school_name&&u.ccu.push(t),t})),e.categories=c,e.universities=u,e.courseNames=e.courses.map((function(e){return e.name})),e.courseIds=e.courses.map((function(e){return e.id})),e.allSubjects=Object(a["a"])(new Set(e.courses.map((function(e){return e.subject})))),e.courseNames.length>0&&(d=localStorage.getItem("selectedCourse"),e.selectedCourse=d||e.courseNames[0],console.log("课程获取成功:",e.courseNames),localStorage.getItem("courseIds")||localStorage.setItem("courseIds",JSON.stringify(e.courseIds)),localStorage.getItem("courseNames")||localStorage.setItem("courseNames",JSON.stringify(e.courseNames)),localStorage.getItem("selectedCourse")||localStorage.setItem("selectedCourse",e.selectedCourse),localStorage.getItem("allSubjects")||localStorage.setItem("allSubjects",JSON.stringify(e.allSubjects)))):(console.log("后端返回的数据格式不正确:",r),alert("获取课程列表失败，请重试。")),t.next=26;break;case 22:t.prev=22,t.t0=t["catch"](10),console.error("获取课程失败:",t.t0),alert("获取课程列表失败，请稍后重试。");case 26:return t.prev=26,e.loading=!1,t.finish(26);case 29:case"end":return t.stop()}}),t,null,[[10,22,26,29]])})))()})),"closeDialogActions",(function(){this.dialogActionsVisible.today=null,this.dialogActionsVisible.weekly=null,this.dialogActionsVisible.monthly=null,this.dialogActionsVisible.earlier=null})),Object(d["a"])(Object(d["a"])(n,"handleFileUpload",(function(e){var t=e.target.files[0];t&&(this.uploadedFile=t)})),"handleClickOutside",(function(e){var t=document.querySelector(".dialog-settings");t&&!t.contains(e.target)&&this.closeDialogActions();var s=document.querySelectorAll(".duihuaxuanze"),n=!1;s.forEach((function(t){t.contains(e.target)&&(n=!0)})),n||this.closeDialogActions()}))),computed:{filteredSubjects:function(){var e=this,t=this.categories[this.selectedCategory]||[],s=this.universities[this.selectedUniversity]||[],n=t.filter((function(e){return s.some((function(t){return t.id===e.id}))}));return this.currentSearchQuery&&(n=n.filter((function(t){return t.name.toLowerCase().includes(e.currentSearchQuery.toLowerCase())}))),n.map((function(e){return e.name}))},filteredTeachers:function(){var e=this,t=this.categories[this.selectedCategory]||[],s=this.universities[this.selectedUniversity]||[],n=t.filter((function(e){return s.some((function(t){return t.id===e.id}))}));return this.currentSearchQuery&&(n=n.filter((function(t){return t.name.toLowerCase().includes(e.currentSearchQuery.toLowerCase())}))),n.map((function(e){return e.teacher}))},hasFilteredSubjects:function(){return this.filteredSubjects.length>0}}}),g=h,v=(s("cb1b"),s("2877")),f=Object(v["a"])(g,i,o,!1,null,"67be187f",null);t["default"]=f.exports},6062:function(e,t,s){"use strict";var n=s("6d61"),i=s("6566");e.exports=n("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),i)},6566:function(e,t,s){"use strict";var n=s("9bf2").f,i=s("7c73"),o=s("e2cc"),a=s("0366"),r=s("19aa"),c=s("2266"),l=s("7dd0"),u=s("2626"),d=s("83ab"),h=s("f183").fastKey,g=s("69f3"),v=g.set,f=g.getterFor;e.exports={getConstructor:function(e,t,s,l){var u=e((function(e,n){r(e,u,t),v(e,{type:t,index:i(null),first:void 0,last:void 0,size:0}),d||(e.size=0),void 0!=n&&c(n,e[l],e,s)})),g=f(t),p=function(e,t,s){var n,i,o=g(e),a=m(e,t);return a?a.value=s:(o.last=a={index:i=h(t,!0),key:t,value:s,previous:n=o.last,next:void 0,removed:!1},o.first||(o.first=a),n&&(n.next=a),d?o.size++:e.size++,"F"!==i&&(o.index[i]=a)),e},m=function(e,t){var s,n=g(e),i=h(t);if("F"!==i)return n.index[i];for(s=n.first;s;s=s.next)if(s.key==t)return s};return o(u.prototype,{clear:function(){var e=this,t=g(e),s=t.index,n=t.first;while(n)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete s[n.index],n=n.next;t.first=t.last=void 0,d?t.size=0:e.size=0},delete:function(e){var t=this,s=g(t),n=m(t,e);if(n){var i=n.next,o=n.previous;delete s.index[n.index],n.removed=!0,o&&(o.next=i),i&&(i.previous=o),s.first==n&&(s.first=i),s.last==n&&(s.last=o),d?s.size--:t.size--}return!!n},forEach:function(e){var t,s=g(this),n=a(e,arguments.length>1?arguments[1]:void 0,3);while(t=t?t.next:s.first){n(t.value,t.key,this);while(t&&t.removed)t=t.previous}},has:function(e){return!!m(this,e)}}),o(u.prototype,s?{get:function(e){var t=m(this,e);return t&&t.value},set:function(e,t){return p(this,0===e?0:e,t)}}:{add:function(e){return p(this,e=0===e?0:e,e)}}),d&&n(u.prototype,"size",{get:function(){return g(this).size}}),u},setStrong:function(e,t,s){var n=t+" Iterator",i=f(t),o=f(n);l(e,t,(function(e,t){v(this,{type:n,target:e,state:i(e),kind:t,last:void 0})}),(function(){var e=o(this),t=e.kind,s=e.last;while(s&&s.removed)s=s.previous;return e.target&&(e.last=s=s?s.next:e.state.first)?"keys"==t?{value:s.key,done:!1}:"values"==t?{value:s.value,done:!1}:{value:[s.key,s.value],done:!1}:(e.target=void 0,{value:void 0,done:!0})}),s?"entries":"values",!s,!0),u(t)}}},"6d61":function(e,t,s){"use strict";var n=s("23e7"),i=s("da84"),o=s("94ca"),a=s("6eeb"),r=s("f183"),c=s("2266"),l=s("19aa"),u=s("861d"),d=s("d039"),h=s("1c7e"),g=s("d44e"),v=s("7156");e.exports=function(e,t,s){var f=-1!==e.indexOf("Map"),p=-1!==e.indexOf("Weak"),m=f?"set":"add",b=i[e],y=b&&b.prototype,w=b,k={},C=function(e){var t=y[e];a(y,e,"add"==e?function(e){return t.call(this,0===e?0:e),this}:"delete"==e?function(e){return!(p&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return p&&!u(e)?void 0:t.call(this,0===e?0:e)}:"has"==e?function(e){return!(p&&!u(e))&&t.call(this,0===e?0:e)}:function(e,s){return t.call(this,0===e?0:e,s),this})};if(o(e,"function"!=typeof b||!(p||y.forEach&&!d((function(){(new b).entries().next()})))))w=s.getConstructor(t,e,f,m),r.REQUIRED=!0;else if(o(e,!0)){var x=new w,_=x[m](p?{}:-0,1)!=x,j=d((function(){x.has(1)})),S=h((function(e){new b(e)})),D=!p&&d((function(){var e=new b,t=5;while(t--)e[m](t,t);return!e.has(-0)}));S||(w=t((function(t,s){l(t,w,e);var n=v(new b,t,w);return void 0!=s&&c(s,n[m],n,f),n})),w.prototype=y,y.constructor=w),(j||D)&&(C("delete"),C("has"),f&&C("get")),(D||_)&&C(m),p&&y.clear&&delete y.clear}return k[e]=w,n({global:!0,forced:w!=b},k),g(w,e),p||s.setStrong(w,e,f),w}},"7db0":function(e,t,s){"use strict";var n=s("23e7"),i=s("b727").find,o=s("44d2"),a=s("ae40"),r="find",c=!0,l=a(r);r in[]&&Array(1)[r]((function(){c=!1})),n({target:"Array",proto:!0,forced:c||!l},{find:function(e){return i(this,e,arguments.length>1?arguments[1]:void 0)}}),o(r)},bb2f:function(e,t,s){var n=s("d039");e.exports=!n((function(){return Object.isExtensible(Object.preventExtensions({}))}))},cb1b:function(e,t,s){"use strict";s("1bdb")},e9c4:function(e,t,s){var n=s("23e7"),i=s("d066"),o=s("d039"),a=i("JSON","stringify"),r=/[\uD800-\uDFFF]/g,c=/^[\uD800-\uDBFF]$/,l=/^[\uDC00-\uDFFF]$/,u=function(e,t,s){var n=s.charAt(t-1),i=s.charAt(t+1);return c.test(e)&&!l.test(i)||l.test(e)&&!c.test(n)?"\\u"+e.charCodeAt(0).toString(16):e},d=o((function(){return'"\\udf06\\ud834"'!==a("\udf06\ud834")||'"\\udead"'!==a("\udead")}));a&&n({target:"JSON",stat:!0,forced:d},{stringify:function(e,t,s){var n=a.apply(null,arguments);return"string"==typeof n?n.replace(r,u):n}})},f183:function(e,t,s){var n=s("d012"),i=s("861d"),o=s("5135"),a=s("9bf2").f,r=s("90e3"),c=s("bb2f"),l=r("meta"),u=0,d=Object.isExtensible||function(){return!0},h=function(e){a(e,l,{value:{objectID:"O"+ ++u,weakData:{}}})},g=function(e,t){if(!i(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,l)){if(!d(e))return"F";if(!t)return"E";h(e)}return e[l].objectID},v=function(e,t){if(!o(e,l)){if(!d(e))return!0;if(!t)return!1;h(e)}return e[l].weakData},f=function(e){return c&&p.REQUIRED&&d(e)&&!o(e,l)&&h(e),e},p=e.exports={REQUIRED:!1,fastKey:g,getWeakData:v,onFreeze:f};n[l]=!0}}]);