(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fee2d63a"],{"7db0":function(t,e,n){"use strict";var s=n("23e7"),r=n("b727").find,o=n("44d2"),a=n("ae40"),c="find",i=!0,u=a(c);c in[]&&Array(1)[c]((function(){i=!1})),s({target:"Array",proto:!0,forced:i||!u},{find:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o(c)},"81d5":function(t,e,n){"use strict";var s=n("7b0b"),r=n("23cb"),o=n("50c4");t.exports=function(t){var e=s(this),n=o(e.length),a=arguments.length,c=r(a>1?arguments[1]:void 0,n),i=a>2?arguments[2]:void 0,u=void 0===i?n:r(i,n);while(u>c)e[c++]=t;return e}},ae05:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"quiz-container"},[n("div",{staticClass:"select-container"},[n("button",{staticClass:"big-button light-blue-button",attrs:{disabled:0===t.currentQuestionIndex},on:{click:t.prevQuestion}},[t._v("上一题")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.selectedCourse,expression:"selectedCourse"}],staticClass:"course-select",on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.selectedCourse=e.target.multiple?n:n[0]},function(e){return t.handleCourseChange(t.selectedCourse)}]}},t._l(t.courseNames,(function(e){return n("option",{key:e,domProps:{value:e}},[t._v(" "+t._s(e)+" ")])})),0),n("button",{staticClass:"big-button light-blue-button",attrs:{disabled:!1},on:{click:t.nextQuestion}},[t._v(" 下一题 ")])]),n("form",{on:{submit:function(e){return e.preventDefault(),t.showExplanations(e)}}},[t.questions.length>0?n("div",{staticClass:"question"},[n("p",{staticClass:"question-text"},[t._v(t._s(t.currentQuestion.text))]),t._l(t.currentQuestion.options,(function(e,s){return n("div",{key:e,staticClass:"option-container"},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.answers[t.currentQuestionIndex],expression:"answers[currentQuestionIndex]"}],attrs:{type:"radio",name:"question"+t.currentQuestionIndex,hidden:""},domProps:{value:e,checked:t._q(t.answers[t.currentQuestionIndex],e)},on:{change:[function(n){return t.$set(t.answers,t.currentQuestionIndex,e)},t.handleAnswerSelect]}}),n("span",{staticClass:"option-letter",class:{selected:t.answers[t.currentQuestionIndex]===e,"correct-answer":t.shouldHighlightCorrect(e),"wrong-answer":t.shouldHighlightWrong(e)}},[t.shouldHighlightCorrect(e)?n("span",{staticClass:"icon"},[t._v("✔")]):t.shouldHighlightWrong(e)?n("span",{staticClass:"icon"},[t._v("✗")]):n("span",[t._v(t._s(String.fromCharCode(65+s)))])]),n("span",{staticClass:"option-text",class:{"correct-text":t.shouldHighlightCorrect(e),"wrong-text":t.shouldHighlightWrong(e)}},[t._v(" "+t._s(e)+" ")])])])})),n("transition",{attrs:{name:"fade"}},[t.showExplanation?n("div",{staticClass:"explanation-box"},[n("p",{staticClass:"correct-answer-text"},[t._v(" 正确答案："+t._s(t.getCorrectAnswerLabel(t.currentQuestion))+" ")]),n("div",{staticClass:"explanation-divider"}),n("p",{staticClass:"explanation-title"},[t._v("试题解析")]),n("p",{staticClass:"explanation-text"},[t._v(t._s(t.currentQuestion.explanation))])]):t._e()])],2):t._e()]),n("div",{staticClass:"function-bar"},[n("button",{staticClass:"favorite-button",on:{click:t.toggleFavorite}}),n("div",{staticClass:"record-container"},[n("div",{staticClass:"record-item"},[n("span",{staticClass:"correct-record"},[t._v("✔")]),n("span",{staticClass:"record-count"},[t._v(t._s(t.correctCount))])]),n("div",{staticClass:"record-item"},[n("span",{staticClass:"wrong-record"},[t._v("✗")]),n("span",{staticClass:"record-count"},[t._v(t._s(t.wrongCount))])])]),n("button",{staticClass:"answer-card-button",on:{click:t.showAnswerCard}},[n("span",{staticClass:"card-icon"},[t._v("📋")])])])])},r=[],o=n("c7eb"),a=n("1da1"),c=n("3835"),i=n("ade3"),u=(n("99af"),n("cb29"),n("7db0"),n("c740"),n("d81d"),n("b0c0"),n("e9c4"),n("b64b"),n("d3b7"),{name:"Evaluation",data:function(){return Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({selectedCourse:"",courseNames:[],courses:[],currentQuestionIndex:0,courseIds:"",questions:[],answers:[],analysis:[]},"selectedCourse","网络传播概论"),"showExplanation",!1),"courses",[]),"selectedSubject",""),"isFavorite",!1),"correctCount",0),"wrongCount",0)},computed:{currentQuestion:function(){return this.questions[this.currentQuestionIndex]||{}}},mounted:function(){this.fetchCourses(),this.resetPages()},methods:Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])(Object(i["a"])({toggleFavorite:function(){this.isFavorite=!this.isFavorite,console.log("收藏状态:",this.isFavorite?"已收藏":"未收藏")},showAnswerCard:function(){alert("答题卡功能待实现")},handleAnswerSelect:function(){var t=this;this.showExplanation=!0;var e=this.answers[this.currentQuestionIndex],n=this.currentQuestion.correct;e===n?(this.correctCount++,console.log("答对了！正确次数:",this.correctCount)):(this.wrongCount++,console.log("答错了！错误次数:",this.wrongCount)),this.$nextTick((function(){t.showExplanations()}))},shouldHighlightCorrect:function(t){return this.showExplanation&&t===this.currentQuestion.correct},shouldHighlightWrong:function(t){return this.showExplanation&&this.answers[this.currentQuestionIndex]===t&&t!==this.currentQuestion.correct},getCorrectAnswerLabel:function(t){var e=t.options.findIndex((function(e){return e===t.correct}));return-1===e?"":'<span class="correct-answer">'.concat(String.fromCharCode(65+e),": ").concat(t.correct,"</span>")},nextQuestion:function(){this.currentQuestionIndex<this.questions.length-1?(this.currentQuestionIndex++,this.showExplanation=!1):this.resetQuestions()},prevQuestion:function(){this.currentQuestionIndex>0&&(this.currentQuestionIndex--,this.showExplanation=!1)},getQuestionClass:function(t){var e,n;return{"correct-answer":this.answers[t]===(null===(e=this.questions[t])||void 0===e?void 0:e.correct),"wrong-answer":this.answers[t]&&this.answers[t]!==(null===(n=this.questions[t])||void 0===n?void 0:n.correct)}},getOptionClass:function(t,e){var n=this.answers[e];return{"correct-answer":n&&t===this.currentQuestion.correct,"wrong-answer":this.answers[e]===t&&t!==this.currentQuestion.correct}},resetQuestions:function(){var t=this,e=this.selectedCourse;if(e){var n=JSON.parse(localStorage.getItem("allSubjects"))||[],s=n.find((function(t){var n=t.split("_"),s=Object(c["a"])(n,2),r=s[1];return r===e}));if(!s)return console.error("未找到与当前课程对应的 subject"),void alert("未找到对应的课程信息，请重试。");console.log("当前选中的 subject:",s);var r=localStorage.getItem("student_id");if(r){var o="http://api.xdrv.cn:52382/show_multiple_c/?subject=  ".concat(encodeURIComponent(s));fetch(o).then((function(t){if(!t.ok)throw console.log("原始响应:",t),new Error("Network response was not ok: ".concat(t.statusText));return t.json()})).then((function(e){if(console.log("接收到的数据:",e),!e||!Array.isArray(e.data)||0===e.data.length)throw new Error("Invalid data format: expected a non-empty array of questions");t.questions=e.data.map((function(t){var e=t.answer,n={A:t.A,B:t.B,C:t.C,D:t.D};return{text:t.question,options:[t.A,t.B,t.C,t.D],correct:n[e],subject:t.subject,chapter:t.chapter,explanation:t.analysis}})),t.answers=Array(t.questions.length).fill(""),t.showExplanation=!1})).catch((function(t){console.error("Failed to fetch questions:",t),alert("Failed to fetch new questions: ".concat(t.message))})),this.currentQuestionIndex=0}else console.error("未找到 student_id，请先登录或完成相关操作")}else alert("请先选择课程")},handleCourseChange:function(t){this.selectedCourse=t,console.log("Selected course name: ".concat(t));var e=JSON.parse(localStorage.getItem("allSubjects"))||[],n=e.find((function(e){var n=e.split("_"),s=Object(c["a"])(n,2),r=(s[0],s[1]);return r===t}));n?this.sendSubjectToBackend(n):(console.error("未找到对应的subject"),this.resetPage()),this.currentQuestionIndex=0},getStudentId:function(){var t=this;return Object(a["a"])(Object(o["a"])().mark((function e(){var n;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,n=localStorage.getItem("student_id"),n){e.next=5;break}return console.error("未找到 student_id，请先登录或完成相关操作"),e.abrupt("return");case 5:t.student_id=n,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),console.error("发生错误：",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()},fetchCourses:function(){var t=this;return Object(a["a"])(Object(o["a"])().mark((function e(){var n,s,r,a;return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=localStorage.getItem("token"),n){e.next=5;break}return console.error("未找到有效的token"),alert("请先登录"),e.abrupt("return");case 5:return e.prev=5,s="http://182.92.182.44:8001/Course_selection/get_courses/",e.next=9,fetch(s,{method:"GET",headers:{Authorization:"Bearer ".concat(n)}});case 9:return r=e.sent,e.next=12,r.json();case 12:a=e.sent,console.log("后端返回的完整数据:",a),a&&Array.isArray(a.courses)&&a.courses.length>0?(t.courses=a.courses.map((function(t){return{id:t.id,name:t.name,subject:t.combined}})),t.courseNames=t.courses.map((function(t){return t.name})),t.allSubjects=t.courses.map((function(t){return t.subject})),t.selectedCourse=localStorage.getItem("selectedCourse")||t.courseNames[0]||"",localStorage.setItem("courseNames",JSON.stringify(t.courseNames)),localStorage.setItem("allSubjects",JSON.stringify(t.allSubjects)),localStorage.setItem("selectedCourse",t.selectedCourse),console.log("课程数据初始化完成")):(console.error("后端返回的数据格式不正确"),alert("获取课程列表失败，请重试。")),e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](5),console.error("获取课程失败:",e.t0),alert("获取课程列表失败，请稍后重试。");case 21:case"end":return e.stop()}}),e,null,[[5,17]])})))()}},"handleCourseChange",(function(t){this.selectedCourse=t,console.log("Selected course name: ".concat(t));var e=JSON.parse(localStorage.getItem("allSubjects"))||[],n=e.find((function(e){var n=e.split("_"),s=Object(c["a"])(n,2),r=(s[0],s[1]);return r===t}));n?this.sendSubjectToBackend(n):(console.error("未找到对应的subject"),this.resetPage())})),"sendSubjectToBackend",(function(t){var e=this,n="http://api.xdrv.cn:52382/show_multiple_c/?subject=".concat(encodeURIComponent(t));fetch(n,{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(t){if(!t.ok)throw new Error("Network response was not ok: ".concat(t.statusText));return t.json()})).then((function(t){console.log("后端响应：",t),t&&t.data?(e.questions=t.data.map((function(t){var e=t.answer,n={A:t.A,B:t.B,C:t.C,D:t.D};return{text:t.question,options:[t.A,t.B,t.C,t.D],correct:n[e],subject:t.subject,chapter:t.chapter,explanation:t.analysis}})),e.answers=Array(e.questions.length).fill(""),e.showExplanation=!1):(console.log("没有获取到题目数据"),e.questions=[],e.answers=[])})).catch((function(t){console.error("获取题目失败：",t),alert("获取题目失败，请检查网络或重试")}))})),"selectAnswer",(function(t,e){this.$set(this.answers,t,e),this.showExplanation=!0,this.showExplanations()})),"showExplanations",(function(){this.showExplanation=!0,console.log("当前题目的正确答案:",this.currentQuestion.correct);var t={question:this.currentQuestion.text,answer:this.currentQuestion.correct,subject:this.currentQuestion.subject,chapter:this.currentQuestion.chapter,student_ans:this.answers[this.currentQuestionIndex]||"--未选择--"};console.log("要发送到服务器的数据:",t),fetch("http://api.xdrv.cn:52382/multiple_c_r/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify([t])}).then((function(t){if(!t.ok)throw new Error("Network response was not ok");return t.json()})).then((function(t){console.log("成功发送数据到服务器:",t)})).catch((function(t){console.error("发送数据到服务器失败:",t)}))})),"resetQuestions",(function(){var t=this,e=this.selectedCourse;if(e){var n=JSON.parse(localStorage.getItem("allSubjects"))||[],s=n.find((function(t){var n=t.split("_"),s=Object(c["a"])(n,2),r=s[1];return r===e}));if(!s)return console.error("未找到与当前课程对应的 subject"),void alert("未找到对应的课程信息，请重试。");console.log("当前选中的 subject:",s);var r=localStorage.getItem("student_id");if(r){var o="http://api.xdrv.cn:52382/show_multiple_c/?subject=".concat(encodeURIComponent(s));fetch(o).then((function(t){if(!t.ok)throw console.log("原始响应:",t),new Error("Network response was not ok: ".concat(t.statusText));return t.json()})).then((function(e){if(console.log("接收到的数据:",e),!e||!Array.isArray(e.data)||0===e.data.length)throw new Error("Invalid data format: expected a non-empty array of questions");t.questions=e.data.map((function(t){var e=t.answer,n={A:t.A,B:t.B,C:t.C,D:t.D};return{text:t.question,options:[t.A,t.B,t.C,t.D],correct:n[e],subject:t.subject,chapter:t.chapter,explanation:t.analysis}})),t.answers=Array(t.questions.length).fill(""),t.showExplanation=!1})).catch((function(t){console.error("Failed to fetch questions:",t),alert("Failed to fetch new questions: ".concat(t.message))}))}else console.error("未找到 student_id，请先登录或完成相关操作")}else alert("请先选择课程")})),"resetPages",(function(){var t=this,e="http://api.xdrv.cn:52382/show_multiple_c/";fetch(e).then((function(t){if(!t.ok)throw console.log("原始响应:",t),new Error("Network response was not ok: ".concat(t.statusText));return t.json()})).then((function(e){if(console.log("接收到的数据:",e),!e||!Array.isArray(e.data)||0===e.data.length)throw new Error("Invalid data format: expected a non-empty array of questions");t.questions=e.data.map((function(t){var e=t.answer,n={A:t.A,B:t.B,C:t.C,D:t.D};return{text:t.question,options:[t.A,t.B,t.C,t.D],correct:n[e],subject:t.subject,chapter:t.chapter,explanation:t.analysis}})),t.answers=Array(t.questions.length).fill(""),t.showExplanation=!1})).catch((function(t){console.error("Failed to fetch questions:",t),alert("Failed to fetch new questions: ".concat(t.message))}))})),"getCorrectAnswerLabel",(function(t){var e=t.options.indexOf(t.correct);return-1!==e?String.fromCharCode(65+e)+": "+t.correct:""}))}),l=u,d=(n("fe86"),n("2877")),h=Object(d["a"])(l,s,r,!1,null,"14f2f48a",null);e["default"]=h.exports},c19d:function(t,e,n){},c740:function(t,e,n){"use strict";var s=n("23e7"),r=n("b727").findIndex,o=n("44d2"),a=n("ae40"),c="findIndex",i=!0,u=a(c);c in[]&&Array(1)[c]((function(){i=!1})),s({target:"Array",proto:!0,forced:i||!u},{findIndex:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}}),o(c)},cb29:function(t,e,n){var s=n("23e7"),r=n("81d5"),o=n("44d2");s({target:"Array",proto:!0},{fill:r}),o("fill")},e9c4:function(t,e,n){var s=n("23e7"),r=n("d066"),o=n("d039"),a=r("JSON","stringify"),c=/[\uD800-\uDFFF]/g,i=/^[\uD800-\uDBFF]$/,u=/^[\uDC00-\uDFFF]$/,l=function(t,e,n){var s=n.charAt(e-1),r=n.charAt(e+1);return i.test(t)&&!u.test(r)||u.test(t)&&!i.test(s)?"\\u"+t.charCodeAt(0).toString(16):t},d=o((function(){return'"\\udf06\\ud834"'!==a("\udf06\ud834")||'"\\udead"'!==a("\udead")}));a&&s({target:"JSON",stat:!0,forced:d},{stringify:function(t,e,n){var s=a.apply(null,arguments);return"string"==typeof s?s.replace(c,l):s}})},fe86:function(t,e,n){"use strict";n("c19d")}}]);